# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.


# The configuration file needs to define the sources, 
# the channels and the sinks.
# Sources, channels and sinks are defined per agent, 
# in this case called 'agent'

#agent.sources = seqGenSrc
#agent.channels = memoryChannel
#agent.sinks = loggerSink

# For each one of the sources, the type is defined
#agent.sources.seqGenSrc.type = seq

# The channel can be defined as follows.
#agent.sources.seqGenSrc.channels = memoryChannel

# Each sink's type must be defined
#agent.sinks.loggerSink.type = logger

#Specify the channel the sink should use
#agent.sinks.loggerSink.channel = memoryChannel

# Each channel's type is defined.
#agent.channels.memoryChannel.type = memory

# Other config values specific to each type of channel(sink or source)
# can be defined as well
# In this case, it specifies the capacity of the memory channel
#agent.channels.memoryChannel.capacity = 100

TwitterAgent.sources = Twitter
TwitterAgent.channels = MemChannel
TwitterAgent.sinks = HDFS

TwitterAgent.sources.Twitter.type = com.cloudera.flume.source.TwitterSource
TwitterAgent.sources.Twitter.channels = MemChannel
TwitterAgent.sources.Twitter.consumerKey = j9X0NPb6xfqe4QBJ3Q6nUhTkI
TwitterAgent.sources.Twitter.consumerSecret = JscwpITQVRRzJQrcbZ3zOxjLLlzrfolIt3qPi1uPKOqolCUhYL
TwitterAgent.sources.Twitter.accessToken = 4027615449-qDOnhw3kS8xedmoKIyxfqXcYIAQ0gO8JHFjNXfL
TwitterAgent.sources.Twitter.accessTokenSecret = g1ipl9amLVL3hUP6cYgHd3l1fpG0sLDErGNXm7YCHLl3v
TwitterAgent.sources.Twitter.keywords = promo, promote, promotion, weight-loss, skinny, weight loss, extra cash, order, shopper, online degree, opportunity, double your, own boss, $$$, bargain, affordable, as seen on, cash bonus, check, no fees, million, mortgage, why pay more, bankruptcy, social security number, pre-approved, interest rate, miracle, sample, freedom, home, lose, problem, sample, satisfaction, success, remove, never, dormant, passwords, solution, teen, lifetime, hidden, dear, friend, hell, member, opt in, performance, increase sales, subscribe, free, best, trial, gift, hosting, all natural, fantastic deal, certified, act now, apply now, call now, get it now, reduced, limited time, urgent, only


TwitterAgent.sinks.HDFS.channel = MemChannel
TwitterAgent.sinks.HDFS.type = hdfs

# See load in this project.
# In order to partition external tables in Hive, the following changes have been made to folder naming converntion
# Using <YYYY>/<MM>/<DD> in the PARITIONED_BY hive clause was not working as the "/" was getting replaced as "%2F"
# Further analysis of documentation indicated that the for external table partioning, the folder name should have "<col_name>"=VALUE
# Thus, the use of "date=%Y-%m-%d" as the folder name 
# TODO: Revisit this and clean-up based on changes made to Hive load.sql

# TwitterAgent.sinks.HDFS.hdfs.path = hdfs://localhost:8020/user/flume/tweets/%Y/%m/%d/
TwitterAgent.sinks.HDFS.hdfs.path = hdfs://localhost:8020/user/flume/tweets/date=%Y-%m-%d


TwitterAgent.sinks.HDFS.hdfs.fileType = DataStream
TwitterAgent.sinks.HDFS.hdfs.writeFormat = Text
TwitterAgent.sinks.HDFS.hdfs.batchSize = 1000
TwitterAgent.sinks.HDFS.hdfs.rollSize = 0
TwitterAgent.sinks.HDFS.hdfs.rollCount = 10000

TwitterAgent.channels.MemChannel.type = memory
TwitterAgent.channels.MemChannel.capacity = 1000
TwitterAgent.channels.MemChannel.transactionCapacity = 1000
